<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>줄 서는 방법</title>
</head>

<body>
  <form action="" onsubmit="return calc();return false">
    <p class="url">
      줄 서는 방법 : <a href="https://programmers.co.kr/learn/courses/30/lessons/12936?language=javascript" target="_blank">문제링크</a>
    </p>
  </form>
  <script>
    var n = 5,
        k = 20;
    function solution(n, k) {
      var answer = new Array();
      var sameNumberValue = new Array();  // n개의 배열이 반복될때 자릿수별 같은수의 개수
      var exam = new Array();  // 정답을 구성할 보기용 배열

      // answer에 담을 n개의 배열 생성
      for (var n1 = 1; n1 <= n; n1++) {
        exam[n1-1] = n1;
      }
      var size = n - 2;

      // 자릿수별 같은 개수의 카운팅을 구하는 함수
      for (var i = 0; i < size; i++) {
        sameNumberValue[i] = 1;
        for (j = i; j >= 0; j--) {
          sameNumberValue[j] = sameNumberValue[j] * (n - i - 1);
        }
      }

      // 이제 답을 구하자
      for (var j = 0; j < n-1; j++) {
        if (j !== n - 2) {
          // k에서 sameNumberValue를 나누면 answer에 각 배열을 구할 수 있다
          var countValue = Math.ceil(k / sameNumberValue[j]);
          // 위에서 countValue값을 구했을때 보기보다 크면 반복되기 때문에 exam으로 나눈 나머지를 구한다
          if (countValue > exam.length) {
            countValue = countValue % exam.length;
          }
          answer[j] = exam.splice(countValue - 1, 1)[0];
        } else {
          // 마지막 두자리는 k의 홀짝 여부에 따라 다르기 때문에 다른 방식으로 계산
          var examLastValue = exam.length - 1;
          if (k % 2 == 0) {
            answer[n - 1] = exam[examLastValue - 1];
            answer[n - 2] = exam[examLastValue];
          } else {
            answer[n - 2] = exam[examLastValue - 1];
            answer[n - 1] = exam[examLastValue];
          }
        }
      }
      return answer;
    }
    console.log(solution(n, k));
    function calc() {
      let line = document.getElementById("inputValue").value;
      document.getElementById("outputValue").innerHTML = solution(line);
      return false;
    }
  </script>
</body>

</html>